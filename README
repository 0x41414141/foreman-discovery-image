

  _____
 |  ___|__  _ __ ___ _ __ ___   __ _ _ __
 | |_ / _ \| '__/ _ \ '_ ` _ \ / _` | '_ \
 |  _| (_) | | |  __/ | | | | | (_| | | | |
 |_|__\___/|_|  \___|_| |_| |_|\__,_|_| |_|
   |  _ \(_)___  ___ _____   _____ _ __ _   _
   | | | | / __|/ __/ _ \ \ / / _ \ '__| | | |
   | |_| | \__ \ (_| (_) \ V /  __/ |  | |_| |
   |____/|_|___/\___\___/ \_/ \___|_|   \__, |
                                        |___/


Foreman Discovery Image
=======================

Building
--------

To prepare CentOS 7 build:

  $ ./build-livecd fdi-centos7.ks

To prepare Fedora 19 build:

  $ ./build-livecd fdi-fedora19.ks

To build the image (make sure you have at least 1 GB free space in /tmp):

  $ sudo ./build-livecd-root

Copy the resulting tarball to the TFTP boot directory:

  $ tar xvf fdi-image-*.tar -C /var/tftproot/boot

And visit https://github.com/theforeman/foreman_discovery for more information
about how to configure Foreman and how to use the plugin.

Troubleshooting
---------------

The root account and ssh access are disabled by default, but you can enable ssh
and set root password using the following kernel command line options:

  fdi.ssh=1 fdi.rootpw=redhat

Downstream
----------

This repostirory is downstream friendly for koji/brew. The generated
fdi-image.ks kickstart file is self-containing. After running build-livecd
script use koji/brew to build the image.

  brew spin-livecd \
    fdi-image-rhel_7_0 \
    $(cat root/usr/share/fdi/VERSION) \
    --release $(cat root/usr/share/fdi/RELEASE) \
    --repo=http://my.repo/1 \
    --scratch \
    my-tag-image
    x86_64 \
    fdi-image.ks

Then extract the kernel and initial RAM disk:

  mv fdi-image-rhel_7_0-1.9.90-20141022.1.iso fdi.iso
  livecd-iso-to-pxeboot fdi.iso
